version: 2
models:
  - name: Patient
    columns: 
    - name: "id"
      tests:
      - fhir_uuid
  - name: Observation
    columns: 
    - name: "resource#>>'{ issued }'"
      tests:
      - fhir_date
    - name: "resource#>>'{ effective,dateTime }'"
      tests:
      - fhir_date
    - name: id
      tests:
      - fhir_uuid
    - name: resource#>>'{ subject,id }'
      tests:
      - fhir_uuid
    - name: resource#>>'{ encounter,id }'
      tests:
      - fhir_uuid
  - name: Encounter 
    columns: 
    - name: "resource#>>'{period,start}'"
      tests:
      - fhir_date
    - name: "resource#>>'{period,end}'"
      tests:
      - fhir_date
  - name: Procedure
    columns: 
    - name: "resource#>>'{performed,Period,end}'"
      tests:
      - fhir_date
    - name: "resource#>>'{performed,Period,start}'"
      tests:
      - fhir_date
  - name: Condition
    columns: 
    - name: "resource#>>'{onset,dateTime}'"
      tests:
      - fhir_date
    - name: "resource#>>'{abatement,dateTime}'"
      tests:
      - fhir_date
    - name: "resource#>>'{recordedDate}'"
      tests:
      - fhir_date